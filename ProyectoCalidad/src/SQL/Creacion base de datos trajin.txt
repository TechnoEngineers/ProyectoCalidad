CREATE DATABASE TRAJIN;

USE TRAJIN;

CREATE TABLE eventos(ideventos int PRIMARY KEY auto_increment,
						 status char(1),
						 lugarevento varchar(50),
						 fecha date);

CREATE TABLE cuadros(idcuadro int PRIMARY KEY auto_increment,
						 nombre varchar(50),
						 tiempocambio int);

CREATE TABLE cuadroevento(idcuadroevento int PRIMARY KEY auto_increment,
						 idevento int,
						 idcuadro int,
						 FOREIGN KEY(idevento) REFERENCES eventos(ideventos),
						 FOREIGN KEY(idcuadro) REFERENCES cuadros(idcuadro));

CREATE TABLE regiones(idregiones int PRIMARY KEY auto_increment,
						 nombre varchar(60),
						 imagenreferencia varchar(300),
						 idcuadro int,
						 FOREIGN KEY(idcuadro) REFERENCES cuadros(idcuadro));

CREATE TABLE regionesevento(idregionevento int PRIMARY KEY auto_increment,
						 idcuadroevento int,
						 idregiones int,
						 FOREIGN KEY(idcuadroevento) REFERENCES cuadroevento(idcuadroevento),
						 FOREIGN KEY(idregiones) REFERENCES regiones(idregiones));


CREATE TABLE bailes(idbaile int PRIMARY KEY auto_increment,
						 nombre varchar(60),
						 duracion int,
						 idregiones int,
						 FOREIGN KEY(idregiones) REFERENCES regiones(idregiones));

CREATE TABLE bailesevento(idbailesevento int PRIMARY KEY auto_increment,
						 idbaile int,
						 idregionesevento int,
						 FOREIGN KEY(idbaile) REFERENCES bailes(idbaile),
						 FOREIGN KEY(idregionesevento) REFERENCES regionesevento(idregionevento));

CREATE TABLE usuarios(idusuario int PRIMARY KEY auto_increment,
						 tipodeusuario char(1),
						 contrasenia varchar(50),
						 status int
						 fechaingreso date,
						 expediente int,
						 nombre varchar(30),
						 apellidopaterno varchar(50),
						 apellidomaterno varchar(50),
						 edad int,
						 sexo char(1),
						 calle varchar(100),
						 numero int,
						 colonia varchar(100),
						 ciudad varchar(50),
						 estado varchar(50),
						 cp int,
						 telcelular int,
						 telcasa int,
						 teloficina int,
						 correo varchar(100),
						 fechanac date,
						 lugarnacimiento varchar(100),
						 estadocivil char(1),
						 pasaporte varchar(50),
						 vigenciapasaporte date,
						 nocartillamilitar int,
						 estatura double,
						 responsable varchar(50),
						 tiposanguineo varchar(5),
						 alergias varchar(250),
						 enfermedades varchar(250),
						 nombremedicocabecera varchar(100),
						 telmedicocabecera int,
						 medicaciondiarrea varchar(30),
						 medicaciondolorcabeza varchar(30),
						 medicaciondolorestomago varchar(30),
						 medicaciondolormuscular varchar(30),
						 medicaciongripa varchar(30),
						 medicacionotro varchar(30),
						 formadeenterarse varchar(50),
						 baila varchar(50),
						 baile varchar(50),
						 lugardondebailaba varchar(50),
						 tiempoquebailo varchar(30),
						 horariodisponible varchar(30),
						 comentario varchar(250));

CREATE TABLE bailarinesevento(idbailarinevento int PRIMARY KEY auto_increment,
						 idbailesevento int,
						 idusuario int,
						 FOREIGN KEY(idbailesevento) REFERENCES bailesevento(idbailesevento),
						 FOREIGN KEY(idusuario) REFERENCES usuarios(idusuario));

CREATE TABLE adeudos(idadeudos int PRIMARY KEY auto_increment,
						 idusuarios int,
						 renta double,
						 rentaanterior double,
						 cantidadrentas double,
						 status char(1),
						 monto double,
						 fechaultimopago date,
						 FOREIGN KEY(idusuarios) REFERENCES usuarios(idusuario));

CREATE TABLE pagos(idpagos int PRIMARY KEY auto_increment,
						 idadeudos int,
						 idpagoparcial double,
						 fecha date,
						 FOREIGN KEY(idadeudos) REFERENCES adeudos(idadeudos));

CREATE TABLE vestuarios(idvestuario int PRIMARY KEY auto_increment,
						 tipo char(1),
						 descripcion varchar(250),
						 color varchar(50),
						 sexo char(1));

CREATE TABLE vestimenta(idvestimenta int PRIMARY KEY auto_increment,
						 idvestuario int,
						 idregion int,
						 FOREIGN KEY(idvestuario) REFERENCES vestuarios(idvestuario),
						 FOREIGN KEY(idregion) REFERENCES regiones(idregiones));

CREATE TABLE inventarios(idinventario int PRIMARY KEY auto_increment,
						 idvestuario int,
						 cantidad int,
						 piezasdaniadas int,
						 piezasasignadas int,
						 clavevestuario int,
						 FOREIGN KEY(idvestuario) REFERENCES vestuarios(idvestuario));

CREATE TABLE vestuariousuario(idvestuariousuario int PRIMARY KEY auto_increment,
						 idusuario int,
						 idinventario int,
						 FOREIGN KEY(idusuario) REFERENCES usuarios(idusuario),
						 FOREIGN KEY(idinventario) REFERENCES inventarios(idinventario));

CREATE TABLE asignavestuario(idasignavestuario int PRIMARY KEY auto_increment,
						 idbailarinevento int,
						 idinventario int,
						 idregionesevento int,
						 FOREIGN KEY(idbailarinevento) REFERENCES bailarinesevento(idbailarinevento),
						 FOREIGN KEY(idinventario) REFERENCES inventarios(idinventario),
						 FOREIGN KEY(idregionesevento) REFERENCES regionesevento(idregionevento));

CREATE TABLE danio(iddanio int PRIMARY KEY auto_increment,
						 monto double,
						 status char(1),
						 idusuario int,
						 idevento int,
						 idasignavestuario int,
						 FOREIGN KEY(idusuario) REFERENCES usuarios(idusuario),
						 FOREIGN KEY(idevento) REFERENCES eventos(ideventos),
						 FOREIGN KEY(idasignavestuario) REFERENCES asignavestuario(idasignavestuario));